CC=g++ --std=c++20

GLFW_PATH=C:\libs\glfw-3.3.8.bin.WIN64\glfw-3.3.8.bin.WIN64
GLM_PATH=.\glm
FREETYPE_PATH=C:\libs\ft2130\freetype-2.13.0
FREETYPE_DLL=D:\freetype

FLAGS=-Wall -L$(FREETYPE_DLL) -L$(GLFW_PATH)\lib-mingw-w64 -lglfw3 -lgdi32 -lopengl32 -lfreetype -I$(GLFW_PATH)\include -I$(GLM_PATH) -I$(FREETYPE_PATH)\include

SOURCE=$(wildcard src/*.cpp) $(wildcard src/window/*.cpp) $(wildcard src/gameObjects/*.cpp) $(wildcard src/gameObjects/objects2D/*.cpp) $(wildcard src/gameObjects/colliders/*.cpp) $(wildcard src/gameObjects/menuItems/*.cpp)

HEADERS=$(pathsubst src/%, include/%, $(SOURCE))
HEADERS=$(pathsubst %.cpp, %.hpp, $(HEADERS))


OBJ=$(SOURCE:.cpp=.o) src/glad.o

lib/libdojo.dll: $(OBJ)
	$(CC) --shared -o $@ $^ $(FLAGS)

src/glad.o: glad.c
	$(CC) -fPIC -c -o $@ $< $(FLAGS)

%.o: %.cpp
	$(CC) -fPIC -c -o $@ $< $(FLAGS)

clean:
	rm $(OBJ)
	rm lib/libdojo.dll

printSource:
	echo $(SOURCE)
	echo $(OBJ)
